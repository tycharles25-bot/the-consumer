{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/tylercharles/TheConsumer/web/src/lib/env.ts"],"sourcesContent":["export const env = {\n  appName: process.env.NEXT_PUBLIC_APP_NAME || 'The Consumer',\n  themePrimary: process.env.THEME_PRIMARY || '#ff6a00',\n  stripeSecretKey: process.env.STRIPE_SECRET_KEY || '',\n  stripeWebhookSecret: process.env.STRIPE_WEBHOOK_SECRET || '',\n  twilio: {\n    sid: process.env.TWILIO_ACCOUNT_SID || '',\n    token: process.env.TWILIO_AUTH_TOKEN || '',\n    verifySid: process.env.TWILIO_VERIFY_SID || ''\n  },\n  postmarkToken: process.env.POSTMARK_SERVER_TOKEN || '',\n  emailFrom: process.env.EMAIL_FROM || 'The Consumer <no-reply@theconsumer.com>',\n  aws: {\n    region: process.env.AWS_REGION || 'us-east-1',\n    bucket: process.env.AWS_S3_BUCKET || '',\n    accessKeyId: process.env.AWS_ACCESS_KEY_ID || '',\n    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY || ''\n  },\n  tremendous: {\n    apiKey: process.env.TREMENDOUS_API_KEY || '',\n    fundingSourceId: process.env.TREMENDOUS_FUNDING_SOURCE_ID || ''\n  }\n};\n\n\n\n"],"names":[],"mappings":";;;;AAAO,MAAM,MAAM;IACjB,SAAS,QAAQ,GAAG,CAAC,oBAAoB,IAAI;IAC7C,cAAc,QAAQ,GAAG,CAAC,aAAa,IAAI;IAC3C,iBAAiB,QAAQ,GAAG,CAAC,iBAAiB,IAAI;IAClD,qBAAqB,QAAQ,GAAG,CAAC,qBAAqB,IAAI;IAC1D,QAAQ;QACN,KAAK,QAAQ,GAAG,CAAC,kBAAkB,IAAI;QACvC,OAAO,QAAQ,GAAG,CAAC,iBAAiB,IAAI;QACxC,WAAW,QAAQ,GAAG,CAAC,iBAAiB,IAAI;IAC9C;IACA,eAAe,QAAQ,GAAG,CAAC,qBAAqB,IAAI;IACpD,WAAW,QAAQ,GAAG,CAAC,UAAU,IAAI;IACrC,KAAK;QACH,QAAQ,QAAQ,GAAG,CAAC,UAAU,IAAI;QAClC,QAAQ,QAAQ,GAAG,CAAC,aAAa,IAAI;QACrC,aAAa,QAAQ,GAAG,CAAC,iBAAiB,IAAI;QAC9C,iBAAiB,QAAQ,GAAG,CAAC,qBAAqB,IAAI;IACxD;IACA,YAAY;QACV,QAAQ,QAAQ,GAAG,CAAC,kBAAkB,IAAI;QAC1C,iBAAiB,QAAQ,GAAG,CAAC,4BAA4B,IAAI;IAC/D;AACF","debugId":null}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///Users/tylercharles/TheConsumer/web/src/lib/stripe.ts"],"sourcesContent":["import Stripe from 'stripe';\nimport { env } from './env';\n\nexport function getStripe() {\n  if (!env.stripeSecretKey || env.stripeSecretKey.startsWith('pk_')) {\n    throw new Error('STRIPE_SECRET_KEY must be a secret key (sk_test_...)');\n  }\n  return new Stripe(env.stripeSecretKey, { apiVersion: '2024-06-20' } as any);\n}\n\n\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IACd,IAAI,CAAC,0HAAG,CAAC,eAAe,IAAI,0HAAG,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ;QACjE,MAAM,IAAI,MAAM;IAClB;IACA,OAAO,IAAI,mKAAM,CAAC,0HAAG,CAAC,eAAe,EAAE;QAAE,YAAY;IAAa;AACpE","debugId":null}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///Users/tylercharles/TheConsumer/web/src/lib/store.ts"],"sourcesContent":["// Simple in-memory store for MVP preview (resets on server restart)\nexport type User = { id: string; phone: string; email?: string; balanceCents: number; pendingCents: number; payoutVerified?: boolean; payoutEmail?: string };\nexport type Advertiser = { id: string; name: string; balanceCents: number };\nexport type QuizQuestion = {\n  type: 'tf' | 'mc';\n  question: string;\n  // For true/false use options ['True','False'] and correctIndex 0|1\n  options: string[];\n  correctIndex: number;\n};\n\nexport type Creative = {\n  id: string;\n  advertiserId: string;\n  videoUrl: string;\n  title?: string;\n  description?: string;\n  status: 'pending' | 'approved' | 'rejected' | 'paused';\n  payoutPer?: number;\n  advertiserUrl?: string;\n  quiz?: { q1: QuizQuestion; q2: QuizQuestion };\n};\n\nexport const db = {\n  users: new Map<string, User>(),\n  advertisers: new Map<string, Advertiser>(),\n  creatives: new Map<string, Creative>(),\n  dayViews: new Map<string, { date: string; c: number }>()\n};\n\nexport function incUserDaily(userId: string) {\n  const today = new Date().toISOString().slice(0,10);\n  const rec = db.dayViews.get(userId);\n  if (!rec || rec.date !== today) db.dayViews.set(userId, { date: today, c: 0 });\n  const cur = db.dayViews.get(userId)!;\n  cur.c++;\n  return cur.c;\n}\n\n\n"],"names":[],"mappings":"AAAA,oEAAoE;;;;;;;AAuB7D,MAAM,KAAK;IAChB,OAAO,IAAI;IACX,aAAa,IAAI;IACjB,WAAW,IAAI;IACf,UAAU,IAAI;AAChB;AAEO,SAAS,aAAa,MAAc;IACzC,MAAM,QAAQ,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAE;IAC/C,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC;IAC5B,IAAI,CAAC,OAAO,IAAI,IAAI,KAAK,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ;QAAE,MAAM;QAAO,GAAG;IAAE;IAC5E,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC;IAC5B,IAAI,CAAC;IACL,OAAO,IAAI,CAAC;AACd","debugId":null}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///Users/tylercharles/TheConsumer/web/src/app/api/payment/ad/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { getStripe } from '@/lib/stripe';\nimport { db } from '@/lib/store';\n\nexport async function POST(req: NextRequest) {\n  const { advertiserId, amountCents, payoutPer: _payoutPerIgnored, videoUrl, creativeId } = await req.json();\n  const payoutPer = 25; // fixed $0.25 per viewer\n  \n  if (!advertiserId || !amountCents || !videoUrl) {\n    return NextResponse.json({ error: 'Missing required fields' }, { status: 400 });\n  }\n\n  if (amountCents < 1000) { // $10 minimum\n    return NextResponse.json({ error: 'Minimum payment is $10' }, { status: 400 });\n  }\n\n  try {\n    const stripe = getStripe();\n    \n    // Calculate fee (5% of total)\n    const feeCents = Math.ceil(amountCents * 0.05);\n    const remainingCents = amountCents - feeCents;\n\n    // Create or update advertiser\n    let advertiser = db.advertisers.get(advertiserId);\n    if (!advertiser) {\n      advertiser = { id: advertiserId, name: advertiserId, balanceCents: 0 };\n      db.advertisers.set(advertiserId, advertiser);\n    }\n\n    // Create or update creative\n    if (creativeId) {\n      let creative = db.creatives.get(creativeId);\n      if (!creative) {\n        creative = {\n          id: creativeId,\n          advertiserId,\n          videoUrl,\n          status: 'approved',\n          payoutPer // Store the payout amount per viewer (fixed)\n        };\n        db.creatives.set(creativeId, creative);\n      } else {\n        creative.payoutPer = payoutPer;\n        db.creatives.set(creativeId, creative);\n      }\n    }\n\n    // Create Stripe Checkout Session\n    const session = await stripe.checkout.sessions.create({\n      mode: 'payment',\n      payment_method_types: ['card'],\n      line_items: [\n        {\n          quantity: 1,\n          price_data: {\n            currency: 'usd',\n            unit_amount: amountCents,\n            product_data: {\n              name: 'Ad Campaign',\n              description: `Ad campaign with $${(payoutPer / 100).toFixed(2)} per viewer payout`\n            }\n          }\n        }\n      ],\n      success_url: `${req.nextUrl.origin}/post/create/done`,\n      cancel_url: `${req.nextUrl.origin}/post/create/payment`,\n      metadata: {\n        advertiserId,\n        creativeId: creativeId || '',\n        payoutPer: payoutPer.toString(),\n        totalCents: amountCents.toString(),\n        feeCents: feeCents.toString(),\n        remainingCents: remainingCents.toString()\n      }\n    });\n\n    return NextResponse.json({ url: session.url, sessionId: session.id });\n  } catch (e: any) {\n    console.error('Payment error:', e);\n    return NextResponse.json({ error: e?.message || 'Payment processing failed' }, { status: 500 });\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAgB;IACzC,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,WAAW,iBAAiB,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,MAAM,IAAI,IAAI;IACxG,MAAM,YAAY,IAAI,yBAAyB;IAE/C,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,UAAU;QAC9C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;IAEA,IAAI,cAAc,MAAM;QACtB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;IAEA,IAAI;QACF,MAAM,SAAS,IAAA,mIAAS;QAExB,8BAA8B;QAC9B,MAAM,WAAW,KAAK,IAAI,CAAC,cAAc;QACzC,MAAM,iBAAiB,cAAc;QAErC,8BAA8B;QAC9B,IAAI,aAAa,2HAAE,CAAC,WAAW,CAAC,GAAG,CAAC;QACpC,IAAI,CAAC,YAAY;YACf,aAAa;gBAAE,IAAI;gBAAc,MAAM;gBAAc,cAAc;YAAE;YACrE,2HAAE,CAAC,WAAW,CAAC,GAAG,CAAC,cAAc;QACnC;QAEA,4BAA4B;QAC5B,IAAI,YAAY;YACd,IAAI,WAAW,2HAAE,CAAC,SAAS,CAAC,GAAG,CAAC;YAChC,IAAI,CAAC,UAAU;gBACb,WAAW;oBACT,IAAI;oBACJ;oBACA;oBACA,QAAQ;oBACR;gBACF;gBACA,2HAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY;YAC/B,OAAO;gBACL,SAAS,SAAS,GAAG;gBACrB,2HAAE,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY;YAC/B;QACF;QAEA,iCAAiC;QACjC,MAAM,UAAU,MAAM,OAAO,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC;YACpD,MAAM;YACN,sBAAsB;gBAAC;aAAO;YAC9B,YAAY;gBACV;oBACE,UAAU;oBACV,YAAY;wBACV,UAAU;wBACV,aAAa;wBACb,cAAc;4BACZ,MAAM;4BACN,aAAa,CAAC,kBAAkB,EAAE,CAAC,YAAY,GAAG,EAAE,OAAO,CAAC,GAAG,kBAAkB,CAAC;wBACpF;oBACF;gBACF;aACD;YACD,aAAa,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC;YACrD,YAAY,GAAG,IAAI,OAAO,CAAC,MAAM,CAAC,oBAAoB,CAAC;YACvD,UAAU;gBACR;gBACA,YAAY,cAAc;gBAC1B,WAAW,UAAU,QAAQ;gBAC7B,YAAY,YAAY,QAAQ;gBAChC,UAAU,SAAS,QAAQ;gBAC3B,gBAAgB,eAAe,QAAQ;YACzC;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,KAAK,QAAQ,GAAG;YAAE,WAAW,QAAQ,EAAE;QAAC;IACrE,EAAE,OAAO,GAAQ;QACf,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,GAAG,WAAW;QAA4B,GAAG;YAAE,QAAQ;QAAI;IAC/F;AACF","debugId":null}}]
}